<?xml version="1.0" encoding="UTF-8"?>

<!-- FCM transforms XML File -->
    <transforms:Transformation-ML 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:transforms="http://www.isac-net.org/std/Transformation-ML/v1.0/"
        xmlns:mml="http://www.w3.org/1998/Math/MathML"
        xsi:schemaLocation="
            http://www.isac-net.org/std/Transformation-ML/v1.0/  ../../Transformation-ML.v1.0/schema/Transformation-ML.v1.0.xsd
            http://www.w3.org/1998/Math/MathML ../../Transformation-ML.v1.0/mathml2/mathml2.xsd">
	
	<!-- All transformations in this file are tested with the event in the int-10_20_test_file.fcs FCS file.
	     It has one event (10, 20) with parameters (FS, SS).
	     
	     This file tests transformations of transformations. Only the last transformation
	     in a series needs to be tested ... i.e, b-2deep, d-4deep, h-8deep.
	-->

	<!-- Transformation nested two deep.
	
	a: root((0.5 * e^(1 * y) - 1.5 * e^(-2 * y) + 2.5) - 10) = 2.708937121
	b: 3 * 2.708937121 + 5 = 13.126811363
	
	-->
	<transforms:transformation transforms:newName="a-2deep">
        <transforms:pre-defined>
            <transforms:bi-exponential transforms:a="0.5" transforms:b="1" transforms:c="1.5" transforms:d="2" transforms:f="2.5" transforms:parameter="FS" />
        </transforms:pre-defined>
    </transforms:transformation>
    
    <transforms:transformation transforms:newName="b-2deep">
        <transforms:pre-defined>
            <transforms:linear transforms:a="3.0" transforms:b="5" transforms:parameter="a-2deep"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <!-- Transformation nested four deep 
    
    a: root((10^(y * 3 /1000) + 35 * 3 / 1000 * y - 1) - 10) = 87.34948401
	b: 87.34948401 < t = 649.7900106 => 0.049246678 * 87.34948401 + 32 = 36.30167191250661878
	c: ln(36.30167191250661878) * 1000 / 3 = 1197.2879328019778620131511418328
	d: log10(1197.2879328019778620131511418328) * 2000 / 5 = 1231.2794421474116452230074312062
    
    Note: expected values were calculated with Calculator from Windows. Obviously, there are
          way more digits than needed ... and beyond a certain point may be inaccurate.
    
    -->
    <transforms:transformation transforms:newName="a-4deep">
        <transforms:pre-defined>
            <transforms:hyperlog transforms:b="35" transforms:r="1000" transforms:d="3" transforms:parameter="FS"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <!--
       b = 64 / 2 = 32
       r = 256 - 64 = 192
       d = 2 * log(e) * 192 / 64 = 2.605766891
       t = 10 ^ (-2 * log(e) * 192 / 64 + log(262144)) = 649.7900106
       a = 64 / (2 * 649.7900106) = 0.049246678
       c = (10 ^ ((0.049246678 * 649.7900106 + 32) * 2.605766891 / 192)) / 649.7900106 = .011371452
    -->
    <transforms:transformation transforms:newName="b-4deep">
        <transforms:pre-defined>
            <transforms:split-scale transforms:r="192" transforms:maxValue="262144" transforms:transitionChannel="64" transforms:parameter="a-4deep"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <transforms:transformation transforms:newName="c-4deep">
        <transforms:pre-defined>
            <transforms:ln transforms:parameter="b-4deep" transforms:r="1000" transforms:d="3"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <transforms:transformation transforms:newName="d-4deep">
        <transforms:pre-defined>
            <transforms:log transforms:logbase="10" transforms:parameter="c-4deep"  transforms:r="2000" transforms:d="5"/>
        </transforms:pre-defined>
    </transforms:transformation>
        
    <!-- Transformation nested eight deep 
    
    a: root((10000 * e^-(10.36 - .48655813) * (e^(y - .48655813) - (1.5^2) * e^(-(y - .48655813)/1.5) + 1.5^2 - 1) - 10) = 3.403242878
	b: 3 * 3.403242878^2 + 2 * 3.403242878 + 1 = 42.552672015973168652
	c: ln(42.552672015973168652) * 1000 / 3 = 1250.2475500442931939961448715176
	d: log10(1250.2475500442931939961448715176) * 2000 / 5 = 1238.7984048749129442552219116953
	e: 3 * 1238.7984048749129442552219116953 + 5 = 3721.395214624738832765665735086
	f: 3721.395214624738832765665735086 > t = 649.7900106 => log(.011371452 * 3721.395214624738832765665735086) * 192 / 2.605766891 = 119.84654913154187084339340661727
	g: 0.25 * 119.84654913154187084339340661727 ^ 2 + 12.3 * 119.84654913154187084339340661727 + 6.33
	h: log7(5071.2413890027349004917644638532) * 500 / 3 = 730.70699253149303018441107495513
		
    Note: expected values were calculated with Calculator from Windows. Obviously, there are
          way more digits than needed ... and beyond a certain point may be inaccurate.
    -->
    <transforms:transformation transforms:newName="a-8deep">
        <transforms:pre-defined>
            <transforms:logicle transforms:T="10000" transforms:w=".48655813" transforms:m="10.36" transforms:parameter="FS" />
        </transforms:pre-defined>
    </transforms:transformation>
	
	<transforms:transformation transforms:newName="b-8deep">
        <transforms:pre-defined>
            <transforms:quadratic transforms:parameter="a-8deep" transforms:a="3" transforms:b="2" transforms:c="1"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <transforms:transformation transforms:newName="c-8deep">
        <transforms:pre-defined>
            <transforms:ln transforms:parameter="b-8deep" transforms:r="1000" transforms:d="3"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <transforms:transformation transforms:newName="d-8deep">
        <transforms:pre-defined>
            <transforms:log transforms:logbase="10" transforms:parameter="c-8deep"  transforms:r="2000" transforms:d="5"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <transforms:transformation transforms:newName="e-8deep">
        <transforms:pre-defined>
            <transforms:linear transforms:a="3.0" transforms:b="5" transforms:parameter="d-8deep"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
     <!--
       b = 64 / 2 = 32
       r = 256 - 64 = 192
       d = 2 * log(e) * 192 / 64 = 2.605766891
       t = 10 ^ (-2 * log(e) * 192 / 64 + log(262144)) = 649.7900106
       a = 64 / (2 * 649.7900106) = 0.049246678
       c = (10 ^ ((0.049246678 * 649.7900106 + 32) * 2.605766891 / 192)) / 649.7900106 = .011371452
    -->
    <transforms:transformation transforms:newName="f-8deep">
        <transforms:pre-defined>
            <transforms:split-scale transforms:r="192" transforms:maxValue="262144" transforms:transitionChannel="64" transforms:parameter="e-8deep"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <transforms:transformation transforms:newName="g-8deep">
        <transforms:pre-defined>
            <transforms:quadratic transforms:parameter="f-8deep" transforms:a="0.25" transforms:b="12.3" transforms:c="6.33"/>
        </transforms:pre-defined>
    </transforms:transformation>
    
    <transforms:transformation transforms:newName="h-8deep">
        <transforms:pre-defined>
            <transforms:log transforms:parameter="g-8deep" transforms:logbase="7" transforms:r="500" transforms:d="3"/>
        </transforms:pre-defined>
    </transforms:transformation>

</transforms:Transformation-ML>