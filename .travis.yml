language: python

sudo: false

addons:
  apt:
    packages:
    - g++
    - gfortran
    - swig
    - python-qt4
    - libblas-dev
    - liblapack-dev
    - libatlas-dev
    
python:
  - "2.7"
  
before_install:
  - pip install --quiet --upgrade pip

install:
  - echo "version `$CXX --version`"

  # i'm not quite clear on why this has to be installed directly, instead
  # of as a dependency of, say, pandas.  something to do with wanting you to
  # use a pre-packaged version, which is more likely to have a non-broken linear
  # algebra library?
  - pip install --quiet --upgrade numpy
  
  - python setup.py develop

# command to run tests
script: nosetests cytoflow

on_success:

  # TODO: upload the content of dist/*.whl to a public wheelhouse
  - pip install wheel wheelhouse-uploader
  - python setup.py bdist_wheel
  - chmod 600 .travis/deploy_key.pem # this key should have push access
  - echo .travis/deploy_key.pem